"use strict";

var logId = {
		value: -1	
};

(function() {
	function lastet() {
		refresh();
	}

	window.addEventListener("DOMContentLoaded", lastet);
})();

function refresh() {
	window.setTimeout(function() {
		var http = new HTTPOperations("/endringer", updateMemberList);
		http.getMembersByLogId(logId.value);
		console.log("hai");
		refresh();
	}, 10000);	
}

function updateMemberList(responseText) {
	var obj = JSON.parse(responseText);
//	obj = obj.updates;
//	logId.value = obj.logId;
//	console.log(logId.value);
	var obj = obj.updates;
	logId.value = obj.logId;
	var gui = new GUIManager();
	if(obj.newMembers) gui.createMembers(obj.newMembers);
	if(obj.deletedMembers) gui.deleteMembers(obj.deletedMembers);
	if(obj.updatedMembers) gui.updateMembers(obj.updatedMembers);
}

