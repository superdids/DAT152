package no.hib.dat152.models;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;

public class GenericDAO<T> {

	
	@SuppressWarnings("unused")
	private EntityManagerFactory factory;
	@SuppressWarnings("unused")
	private Class<T> entity;
	
	public GenericDAO(EntityManagerFactory factory,  Class<T> entity) {
		this.factory = factory;
		this.entity = entity;
	}
	

	public T find(Object id) {
		EntityManager em = factory.createEntityManager();
		EntityTransaction et = em.getTransaction();
		T result = null;

		try {
			et.begin();
			result = em.find(entity, primaryKey);
			et.commit();
		} catch(Exception e) {
			result = null;
			if(et != null) et.rollback();
			System.err.println("[GenericDAO]: find " + entity.getSimpleName());
		} finally {
			if(em != null) em.close();
		}

		return result;
	
	}
	
}
