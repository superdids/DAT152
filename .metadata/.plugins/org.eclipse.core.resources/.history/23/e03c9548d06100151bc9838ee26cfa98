"use strict";

function Controller(parent) {
	this._parent = parent;
	this._gui = new GUIManager(this, -1);
	this._http = new HTTPOperations("/endringer", gui.show.bind(gui));
}

Controller.prototype.start = function() {
	this._http.getMembersByLogId(this._gui.getLogId());
	this.refresh(gui);
}

Controller.prototype.refresh = function(gui) {
	this._parent.setTimeout(function() {
		http.getMembersByLogId(gui.getLogId());
		refresh(gui);
	}, 2000);
}

Controller.prototype.buttonEdit = function(memberId) {
	return function() {
		gui.editMemberDialog(id);
	}
}

Controller.prototype.put = function() {
	var http = new HTTPOperations("/medlem", updateMember);
	var fields = this.inputs();
	var member = arrayToJSON(fields); //JSON OBJECT

	http.updateMember(id, member);
	var gui = new GUIManager();
	member.memberId = id;
	gui.updateMember(member);


}

Controller.prototype.inputs = function() {
	function el(val) { return document.getElementById(val); };

//	see oppgave01.html under the div id="manageMember"
	return [el("fName"), el("lName"), el("address"), el("phone")];
}

function arrayToJSON(member) {
return {
	"firstname": member[0].value,
	"lastname": member[1].value,
	"address": member[2].value,
	"phone": member[3].value
}
}